"use client";
import React, { useState } from 'react';
import Link from 'next/link';
import { useCart } from '@/components/home/Cart/CartContext';
import { ShoppingCart } from 'lucide-react';
import Cart from '@/components/home/Cart/Cart';

// Icon components - you can keep these in the same file or move them
const BagIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="1.5">
        <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 7.5l.415-.415a.375.375 0 01.53 0l.415.415H8.25zm8.25 0h-1.03l.415-.415a.375.375 0 00-.53 0l-.415.415h1.53zM4.5 9.75v10.5a2.25 2.25 0 002.25 2.25h10.5a2.25 2.25 0 002.25-2.25V9.75L19.5 9s-1.5-1.5-3.75-1.5-3.75 1.5-3.75 1.5-1.5-1.5-3.75-1.5S4.5 9 4.5 9l.75.75z" />
    </svg>
);

const GridIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="1.5">
        <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 8.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
    </svg>
);

const ProfileIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="1.5">
        <path strokeLinecap="round" strokeLinejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
    </svg>
);

const ContactIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
  <path d="M6 7C6 5.61929 7.11929 4.5 8.5 4.5C9.88071 4.5 11 5.61929 11 7C11 8.38071 9.88071 9.5 8.5 9.5C7.11929 9.5 6 8.38071 6 7ZM8.5 3C6.29086 3 4.5 4.79086 4.5 7C4.5 9.20914 6.29086 11 8.5 11C10.7091 11 12.5 9.20914 12.5 7C12.5 4.79086 10.7091 3 8.5 3ZM16 8C16 7.17157 16.6716 6.5 17.5 6.5C18.3284 6.5 19 7.17157 19 8C19 8.82843 18.3284 9.5 17.5 9.5C16.6716 9.5 16 8.82843 16 8ZM17.5 5C15.8431 5 14.5 6.34315 14.5 8C14.5 9.65685 15.8431 11 17.5 11C19.1569 11 20.5 9.65685 20.5 8C20.5 6.34315 19.1569 5 17.5 5ZM4.75 13C3.50736 13 2.5 14.0074 2.5 15.25V15.5011V15.5022L2.50001 15.5048L2.50007 15.5111L2.50035 15.5277C2.50064 15.5406 2.50117 15.5571 2.5021 15.5771C2.50396 15.6169 2.50745 15.6705 2.51398 15.7358C2.52701 15.8661 2.55233 16.045 2.60165 16.2564C2.69995 16.6776 2.89654 17.2404 3.29183 17.8051C4.11066 18.9749 5.67178 20 8.5 20C11.3282 20 12.8893 18.9749 13.7082 17.8051C14.1035 17.2404 14.3001 16.6776 14.3983 16.2564C14.4477 16.045 14.473 15.8661 14.486 15.7358C14.4926 15.6705 14.496 15.6169 14.4979 15.5771C14.4988 15.5571 14.4994 15.5406 14.4996 15.5277L14.4999 15.5111L14.5 15.5048V15.5022V15.25C14.5 14.0074 13.4926 13 12.25 13H4.75ZM4.00047 15.5072L4 15.4947V15.25C4 14.8358 4.33579 14.5 4.75 14.5H12.25C12.6642 14.5 13 14.8358 13 15.25V15.4946L12.9995 15.5072C12.9988 15.5222 12.9972 15.5493 12.9935 15.5865C12.986 15.6612 12.9703 15.7753 12.9376 15.9155C12.8718 16.1974 12.7403 16.5721 12.4793 16.9449C11.9857 17.6501 10.9218 18.5 8.5 18.5C6.07822 18.5 5.01434 17.6501 4.52067 16.9449C4.25971 16.5721 4.12818 16.1974 4.06241 15.9155C4.0297 15.7753 4.014 15.6612 4.00653 15.5865C4.00281 15.5493 4.00117 15.5222 4.00047 15.5072ZM18.6924 13.9949L19.1679 12.7903C19.4104 12.1758 20.0886 11.8568 20.7161 12.0622L21.1472 12.2032C21.8714 12.4402 22.4726 13.0093 22.497 13.7719C22.5962 16.8829 20.0215 21.3545 17.2841 22.827C16.6109 23.1892 15.8158 22.9496 15.2485 22.4358L14.9118 22.1308C14.4231 21.6881 14.3611 20.9417 14.7702 20.4251L15.5701 19.4149C15.8603 19.0484 16.3368 18.8844 16.7909 18.9946L18.0822 19.308C19.1853 18.578 19.7765 17.5517 19.8557 16.2292L18.9395 15.2652C18.617 14.926 18.5206 14.4301 18.6924 13.9949Z" fill="#212121"/>
</svg>
);

const MainCartIcon = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="34" viewBox="0 0 48 34" fill="none">
  <g clip-path="url(#clip0_1_8713)">
    <path d="M40.6972 5.57597C42.4784 5.57597 44.2596 5.57597 46.0456 5.57597C47.4154 5.57597 48.4299 6.83826 47.8268 7.99302C45.8866 11.7144 44.3906 15.6556 41.9641 19.1386C40.6271 21.0601 38.9393 22.6309 36.9804 23.954C34.8299 25.4033 32.4829 26.4178 29.9256 26.8573C27.92 27.1985 25.9003 27.3575 23.8292 26.9835C20.9213 26.4599 18.2985 25.5295 15.8768 23.8465C12.0105 21.1629 9.11654 16.9693 8.4667 12.3643C8.13476 10.008 7.81218 7.64706 7.51764 5.28611C7.45686 4.79522 7.15765 4.79989 6.79299 4.79989C5.30162 4.79989 3.81492 4.79989 2.32355 4.79989C0.972431 4.79522 0 3.84616 0 2.54179C0 1.26548 0.864903 0.470703 2.25342 0.470703C4.59567 0.470703 6.93325 0.470703 9.2755 0.470703C10.9819 0.470703 11.5289 0.84004 11.7814 2.43894C12.118 4.56613 12.3003 6.7167 12.6276 8.8439C12.88 10.4896 13.039 12.182 13.6 13.7341C15.3438 18.5776 18.9344 21.5089 24.1378 22.4065C28.2987 23.1218 32.0435 22.0933 35.3722 19.5126C37.3358 17.9885 38.6214 16.0296 39.7622 13.9258C40.0006 13.4863 39.9305 13.1731 39.5471 12.8599C38.1071 11.6724 36.7093 10.4381 35.2366 9.29271C34.0631 8.38106 33.5723 7.32447 33.9977 6.35672C34.2455 5.78635 34.6382 5.55259 35.274 5.56194C37.0833 5.58532 38.8926 5.57129 40.7019 5.57129L40.6972 5.57597Z" fill="#2F60FF"/>
    <path d="M37.154 14.2065C35.2185 17.6381 32.3901 19.8588 28.3227 20.4244C23.8252 21.0462 20.1458 19.6905 17.2706 16.2262C15.7138 14.3468 15.0593 12.2055 14.8442 9.87264C14.7507 8.8067 14.6011 7.75012 14.5357 6.68418C14.4889 5.86603 14.8115 5.58085 15.653 5.57617C18.1262 5.57617 20.5993 5.57617 23.0725 5.57617C25.5456 5.57617 27.9674 5.57617 30.4125 5.57617C31.4503 5.57617 31.7589 5.8146 31.7589 6.81976C31.7589 8.92358 33.0586 10.1999 34.6435 11.336C35.4242 11.8923 36.1489 12.5188 36.9109 13.1032C37.3177 13.4164 37.4252 13.7156 37.1494 14.2065H37.154Z" fill="#73BF44"/>
    <path d="M32.861 13.4199C32.501 14.542 31.8605 15.5752 30.9722 16.4307C29.537 17.8239 27.6342 18.5906 25.6239 18.5906C23.6135 18.5906 21.7107 17.8239 20.2755 16.4307C19.3872 15.5705 18.7467 14.5373 18.3867 13.4199H20.3456C21.2199 15.4069 23.2582 16.8047 25.6239 16.8047C27.9895 16.8047 30.0278 15.4069 30.9021 13.4199H32.861Z" fill="white"/>
    <path d="M20.6644 9.4741H21.3376C21.3376 9.4741 21.3376 9.4554 21.3376 9.44605C21.3376 9.23567 21.3376 9.02529 21.3376 8.81491C21.3376 8.74478 21.3189 8.67933 21.2535 8.63258C21.1693 8.5718 21.0291 8.54375 20.9262 8.60453C20.8888 8.52037 20.8467 8.4409 20.814 8.35674C20.7906 8.30064 20.8187 8.24454 20.8701 8.21181C20.9122 8.18376 20.959 8.16039 21.0057 8.14169C21.0758 8.11363 21.1506 8.09961 21.2254 8.09961C21.3844 8.09961 21.4966 8.18376 21.5761 8.30999C21.6462 8.4222 21.6836 8.54375 21.6883 8.67465C21.6929 8.88036 21.693 9.08607 21.693 9.29177C21.693 9.35255 21.693 9.40865 21.693 9.4741C21.7491 9.4741 21.8052 9.4741 21.8613 9.4741C21.8846 9.4741 21.8987 9.47878 21.9174 9.49748C22.0155 9.59566 22.1184 9.69851 22.2166 9.79669C22.2166 9.79669 22.2212 9.80136 22.2306 9.81071H21.693C21.693 9.81071 21.693 9.82942 21.693 9.83877C21.693 10.1427 21.693 10.4465 21.693 10.7504C21.693 10.9094 21.7958 11.0263 21.9594 11.0496C22.0997 11.073 22.2259 11.0496 22.3428 10.9748C22.5625 10.8439 22.7355 10.6709 22.843 10.4372C22.8758 10.3671 22.8945 10.2923 22.8945 10.2128C22.8758 10.2128 22.8571 10.2128 22.8384 10.2128C22.6981 10.2175 22.5625 10.1988 22.4597 10.0912C22.4036 10.0351 22.3755 9.96032 22.3615 9.88552C22.3428 9.77799 22.3381 9.66579 22.3849 9.56293C22.4456 9.42268 22.5579 9.34787 22.7121 9.33385C22.8103 9.3245 22.9085 9.3245 23.002 9.35723C23.1282 9.3993 23.217 9.48813 23.2919 9.59098C23.4228 9.76864 23.4602 9.96967 23.4461 10.1847C23.4181 10.5073 23.2591 10.7691 23.0347 11.0029C22.8991 11.1478 22.7402 11.2647 22.5532 11.3442C22.3615 11.4236 22.1651 11.461 21.9548 11.433C21.8379 11.419 21.7397 11.3629 21.6462 11.2974C21.534 11.2226 21.4358 11.1291 21.3657 11.0122C21.3376 10.9655 21.3236 10.914 21.3236 10.8626C21.3236 10.5213 21.3236 10.1801 21.3236 9.83877C21.3236 9.82942 21.3236 9.82006 21.3236 9.81071H21.2582C21.174 9.81071 21.0852 9.81071 21.001 9.81071C20.9917 9.81071 20.9777 9.81071 20.9683 9.80136C20.8654 9.69851 20.7626 9.59566 20.6597 9.4928C20.6597 9.4928 20.6597 9.4928 20.6504 9.47878L20.6644 9.4741Z" fill="white"/>
    <path d="M27.4769 9.4741H28.1501C28.1501 9.4741 28.1501 9.4554 28.1501 9.44605C28.1501 9.23567 28.1501 9.02529 28.1501 8.81491C28.1501 8.74478 28.1314 8.67933 28.066 8.63258C27.9818 8.5718 27.8416 8.54375 27.7387 8.60453C27.7013 8.52037 27.6592 8.4409 27.6265 8.35674C27.6031 8.30064 27.6312 8.24454 27.6826 8.21181C27.7247 8.18376 27.7714 8.16039 27.8182 8.14169C27.8883 8.11363 27.9631 8.09961 28.0379 8.09961C28.1969 8.09961 28.3091 8.18376 28.3886 8.30999C28.4587 8.4222 28.4961 8.54375 28.5008 8.67465C28.5054 8.88036 28.5054 9.08607 28.5054 9.29177C28.5054 9.35255 28.5054 9.40865 28.5054 9.4741C28.5616 9.4741 28.6177 9.4741 28.6738 9.4741C28.6971 9.4741 28.7112 9.47878 28.7299 9.49748C28.828 9.59566 28.9309 9.69851 29.0291 9.79669C29.0291 9.79669 29.0337 9.80136 29.0431 9.81071H28.5054C28.5054 9.81071 28.5054 9.82942 28.5054 9.83877C28.5054 10.1427 28.5054 10.4465 28.5054 10.7504C28.5054 10.9094 28.6083 11.0263 28.7719 11.0496C28.9122 11.073 29.0384 11.0496 29.1553 10.9748C29.375 10.8439 29.548 10.6709 29.6555 10.4372C29.6883 10.3671 29.707 10.2923 29.707 10.2128C29.6883 10.2128 29.6696 10.2128 29.6509 10.2128C29.5106 10.2175 29.375 10.1988 29.2722 10.0912C29.2161 10.0351 29.188 9.96032 29.174 9.88552C29.1553 9.77799 29.1506 9.66579 29.1974 9.56293C29.2581 9.42268 29.3704 9.34787 29.5246 9.33385C29.6228 9.3245 29.721 9.3245 29.8145 9.35723C29.9407 9.3993 30.0295 9.48813 30.1043 9.59098C30.2353 9.76864 30.2727 9.96967 30.2586 10.1847C30.2306 10.5073 30.0716 10.7691 29.8472 11.0029C29.7116 11.1478 29.5527 11.2647 29.3657 11.3442C29.174 11.4236 28.9776 11.461 28.7673 11.433C28.6504 11.419 28.5522 11.3629 28.4587 11.2974C28.3465 11.2226 28.2483 11.1291 28.1782 11.0122C28.1501 10.9655 28.1361 10.914 28.1361 10.8626C28.1361 10.5213 28.1361 10.1801 28.1361 9.83877C28.1361 9.82942 28.1361 9.82006 28.1361 9.81071H28.0707C27.9865 9.81071 27.8977 9.81071 27.8135 9.81071C27.8042 9.81071 27.7901 9.81071 27.7808 9.80136C27.6779 9.69851 27.5751 9.59566 27.4722 9.4928C27.4722 9.4928 27.4722 9.4928 27.4629 9.47878L27.4769 9.4741Z" fill="white"/>
    <path d="M16.6941 33.5283C18.4938 33.5283 19.9527 32.1154 19.9527 30.3725C19.9527 28.6297 18.4938 27.2168 16.6941 27.2168C14.8945 27.2168 13.4355 28.6297 13.4355 30.3725C13.4355 32.1154 14.8945 33.5283 16.6941 33.5283Z" fill="#2F60FF"/>
    <path d="M36.2976 33.5283C38.0973 33.5283 39.5562 32.1154 39.5562 30.3725C39.5562 28.6297 38.0973 27.2168 36.2976 27.2168C34.498 27.2168 33.0391 28.6297 33.0391 30.3725C33.0391 32.1154 34.498 33.5283 36.2976 33.5283Z" fill="#2F60FF"/>
  </g>
  <defs>
    <clipPath id="clip0_1_8713">
      <rect width="47.9998" height="33.058" fill="white" transform="translate(0 0.470703)"/>
    </clipPath>
  </defs>
</svg>
);

export default function MobileFooter() {

const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isCartOpen, setIsCartOpen] = useState(false);
  const { cartItems } = useCart(); // 2. Get cartItems from the context

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);
  const toggleCart = () => setIsCartOpen(!isCartOpen);
    return (
        <footer className="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 md:hidden">
            <div className="grid h-full max-w-lg grid-cols-5 mx-auto">
                <button onClick={toggleCart} className="relative">
                            <ShoppingCart className="cursor-pointer" />
                            {cartItems.length > 0 && (
                              <span className="absolute top-1 right-15 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                                {cartItems.length}
                              </span>
                            )}
                          </button>
                <Link href="/shop" className="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 group">
                    <GridIcon />
                    <span className="text-xs text-gray-500 group-hover:text-blue-600">Shop</span>
                </Link>
                <div className="flex items-center justify-center">
                    <Link href="/" className="inline-flex items-center justify-center w-16 h-16 bg-white  -translate-y-6 shadow-lg hover:bg-gray-100 group focus:ring-4 focus:ring-blue-300 focus:outline-none border-2 border-[#D8D8D8] rounded-[110px]">
                        <MainCartIcon />
                    </Link>
                </div>
                <Link href="/profile" className="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 group">
                    <ProfileIcon />
                    <span className="text-xs text-gray-500 group-hover:text-blue-600">Profile</span>
                </Link>
                <Link href="/contact" className="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 group">
                    <ContactIcon />
                    <span className="text-xs text-gray-500 group-hover:text-blue-600">Contact</span>
                </Link>
            </div>

             <Cart isCartOpen={isCartOpen} toggleCart={toggleCart} />
        </footer>
    );
}